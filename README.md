# Big-Data-Economics-Project

This is the project of Fall 2024 Big Data Economics(09010510) NJU.


# 数字普惠金融与家庭消费结构的升级 - 基于 CFPS 2012/2014/2016/2018 的面板识别与异质性分析

## 1. 研究目标
本文评估中国各地**数字普惠金融发展**（北大数字普惠金融指数）对**家庭消费结构升级**的影响，并从**信贷约束/不确定性约束**等机制展开检验，进一步考察城乡、区域与收入群体的异质性与稳健性。

## 2. 数据与变量
- **数据来源**：CFPS 家庭层面数据（家庭经济、关系、成人问卷等），辅以地区宏观统计与数字普惠金融指数。
- **时间维度**：2012、2014、2016、2018 四期横截面拼接为家庭面板。
- **核心因变量**：消费结构升级度（如发展/享受型消费占比；亦报告关键消费分项占比：食品、医疗、交通通信等）。
- **核心解释变量**：所在地市/省的数字普惠金融**综合指数**与**分项指数**（覆盖广度、使用深度、数字化程度）。
- **控制变量**：家庭人口与抚养比、户主教育与年龄、婚姻与就业状态、地区经济发展等。

## 3. 识别策略与计量设定
### 3.1 双向固定效应（TWFE）
设家庭 \(i\)、年份 \(t\)、地区 \(p(i,t)\)。基准模型：
\[
y_{it}=\beta\,\text{FinIndex}_{p(i,t),t}+X_{it}'\gamma+\mu_i+\tau_t+\varepsilon_{it},
\]
其中 \(y_{it}\) 为消费结构升级度，\(\mu_i\) 为家庭固定效应，\(\tau_t\) 为年份固定效应。标准误按地区聚类/双向聚类稳健。

### 3.2 内生性处理（IV / 滞后项）
- **工具变量一阶式**：
\[
\text{FinIndex}_{pt}=\pi\,Z_{pt}+X_{pt}'\delta+\mu_p+\tau_t+u_{pt},
\]
其中 \(Z_{pt}\) 为**距杭州的球面距离**与**外省数字普惠金融指数均值**的交互项（引入时间变化），利用地理摩擦与外生扩散作为强排他来源。
- **替代设定**：使用 \(\text{FinIndex}_{p,t-1}\) 的**滞后一期**缓解反向因果与同周期共同冲击。

### 3.3 机制与异质性
- **机制检验**：构造家庭层面的**信贷约束**与**不确定性约束**指标，并与 \(\text{FinIndex}\) 交互，识别缓解约束→消费升级的路径。  
- **异质性**：城乡（城/乡）、区域（东部沿海 vs 中西部）、收入（高/低分组）分层估计。

## 4. 稳健性设计
- 指标替换：用**覆盖广度/使用深度/数字化程度**替代综合指数。  
- 样本修剪：剔除直辖市/异常值；分位回归或 Winsorize。  
- 误差稳健：多维聚类/Driscoll–Kraay；安慰剂与伪检验。

## 5. 复现指南（Reproducibility）
> 代码可用 **Python（pandas, linearmodels/statsmodels）或 Stata** 实现；下述流程对两种实现均适用。

1. **环境与依赖**  
   - Python ≥ 3.10；主要依赖：`pandas`, `numpy`, `linearmodels`, `statsmodels`, `pyproj`（距离计算）, `geopandas`（可选）。  

2. **数据准备**  
   - 多表合并：家庭经济 × 户主信息 × 家庭关系 × 地区统计（按家庭号/个人号/地区码对齐）。  
   - 跨年标识：统一家庭编号口径至 2018 年并拼接四期面板。  
   - 指标构造：  
     - 因变量：计算发展/享受型消费占比（或分项占比）。  
     - 解释变量：匹配 \(\text{FinIndex}_{pt}\) 与分项指数。  
     - 机制变量：信贷/不确定性约束。  
   - 地理距离：利用经纬度通过 `pyproj.Geod` 计算至杭州的球面距离，生成 \(Z_{pt}\)。

3. **基准估计**  
   - 运行 TWFE 基准式；逐步加入控制；报告 \(\beta\) 的点估计、SE、R²（within）。  
   - 可按省/地市聚类稳健 SE；对关键分项占比重复估计。

4. **IV 与滞后项**  
   - 两阶段最小二乘（2SLS）：报告一阶 F 统计与过度识别检验；对照 OLS。  
   - 以 \(\text{FinIndex}_{p,t-1}\) 作为替代解释变量进行稳健性验证。

5. **异质性与机制**  
   - 分城乡/区域/收入层分别估计；  
   - 在机制模型中加入交互项：\(\text{FinIndex}\times \text{Constraint}\)。


6. 结果解读（摘要）
- 基准估计显示，数字普惠金融指数与**消费结构升级度**显著正相关（家庭固定效应与年份固定效应控制后）；  
- **农村样本**效应更强，城镇样本弱或不显著；  
- 分项上，**食品占比下降**（恩格尔系数降低）、**医疗占比上升**、**交通通信占比下降**的方向与消费升级一致；  
- 效应主要集中在**东部沿海**地区（农村尤为显著）；  
- 机制层面，缓解**信贷/不确定性约束**与消费升级相匹配；多重稳健性检验下结论一致。



